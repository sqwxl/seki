{% extends "base.html" %}
{% block title %}Settings â€” Seki{% endblock %}
{% block flash %}
    {% if let Some(msg) = flash %}<div class="flash">{{ msg }}</div>{% endif %}
{% endblock %}
{% block content %}
    <h1>Settings</h1>

    {% if player_is_registered %}
        <h2>API Token</h2>
        <p>Use this token to authenticate with the API via <code>Authorization: Bearer &lt;token&gt;</code>.</p>
        {% if let Some(token) = api_token %}
            <div>
                <input type="text" value="{{ token }}" readonly style="width:24ch; font-family:monospace">
            </div>
            <form action="/settings/token" method="post" style="margin-top:0.5em">
                <button type="submit">Regenerate Token</button>
            </form>
        {% else %}
            <form action="/settings/token" method="post">
                <button type="submit">Generate Token</button>
            </form>
        {% endif %}
    {% else %}
        <p><a href="/register">Register</a> to access API tokens and other settings.</p>
    {% endif %}
{% endblock %}
