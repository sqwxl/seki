<!DOCTYPE html>
<html lang="en">
    <head>
        <title>
            {% block title %}Seki{% endblock %}
        </title>
        <meta name="description" content="Seki">
        <meta name="keywords" content="go,weiqi,baduk">
        <meta name="viewport" content="width=device-width,initial-scale=1">
        <meta name="color-scheme" content="light dark">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="mobile-web-app-capable" content="yes">
        {% block og %}
        <meta property="og:site_name" content="Seki">
        <meta property="og:type" content="website">
        <meta property="og:title" content="Seki â€” Play Go Online">
        <meta property="og:description" content="Play Go (Weiqi/Baduk) online with friends">
        {% endblock %}
        <link rel="icon" id="favicon" href="/static/images/favicon-light.svg" type="image/svg+xml">
        <script>
            (function() {
                var m = localStorage.getItem("seki:theme") || "auto";
                var d = m === "dark" || (m === "auto" && matchMedia("(prefers-color-scheme:dark)").matches);
                document.documentElement.dataset.theme = d ? "dark" : "light";
                var q = matchMedia("(prefers-color-scheme:dark)");
                function setFavicon(dark) { document.getElementById("favicon").href = "/static/images/favicon-" + (dark ? "dark" : "light") + ".svg"; }
                setFavicon(q.matches);
                q.addEventListener("change", function(e) { setFavicon(e.matches); });
            })();
        </script>
        <link rel="stylesheet" href="/static/css/styles.css">
        <script id="user-data" type="application/json">{{ user_data|safe }}</script>
        <script src="/static/dist/bundle.js" type="module" defer></script>
        {% block head %}{% endblock %}
    </head>
    <body>
        <nav>
            <div>
                <a href="/games/new" title="New game"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 -960 960 960" fill="currentColor"><path d="M451.5-131.5Q440-143 440-160v-280H160q-17 0-28.5-11.5T120-480q0-17 11.5-28.5T160-520h280v-280q0-17 11.5-28.5T480-840q17 0 28.5 11.5T520-800v280h280q17 0 28.5 11.5T840-480q0 17-11.5 28.5T800-440H520v280q0 17-11.5 28.5T480-120q-17 0-28.5-11.5Z"/></svg></a>
                <a href="/games">Games</a>
                <a href="/analysis">Analysis</a>
            </div>
            <div>
                <button id="theme-toggle" type="button" class="nav-icon" title="Switch to light theme"></button>
                <span id="notification-bell"></span>
                <a href="/users/{{ user_username }}">{{ user_username }}</a>
                {% if user_is_registered %}
                <button type="button" class="nav-icon" title="Log out" onclick="fetch('/logout',{method:'POST'}).then(()=>location.replace('/'))"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 -960 960 960" fill="currentColor"><path d="M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h280v80H200v560h280v80H200Zm440-160-55-58 102-102H360v-80h327L585-622l55-58 200 200-200 200Z"/></svg></button>
                {% else %}
                <a href="/login" class="nav-icon" title="Log in"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 -960 960 960" fill="currentColor"><path d="M480-120v-80h280v-560H480v-80h280q33 0 56.5 23.5T840-760v560q0 33-23.5 56.5T760-120H480Zm-80-160-55-58 102-102H120v-80h327L345-622l55-58 200 200-200 200Z"/></svg></a>
                <a href="/register">Register</a>
                {% endif %}
            </div>
        </nav>
        <main>
            {% block content %}{% endblock %}
        </main>
    </body>
</html>
